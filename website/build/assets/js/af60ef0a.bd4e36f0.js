"use strict";(self.webpackChunkgenai_llm_documentation_website=self.webpackChunkgenai_llm_documentation_website||[]).push([[1528],{28453(e,t,n){n.d(t,{R:()=>l,x:()=>a});var i=n(96540);const s={},r=i.createContext(s);function l(e){const t=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(r.Provider,{value:t},e.children)}},61384(e,t,n){n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"01-handbook-core-method/execution-patterns/05-translator","title":"Pattern: The Translator","description":"Use this pattern to convert code, data, or schemas from one format to another with high fidelity. It treats translation as a structural mapping problem, not a creative writing task.","source":"@site/../docs/01-handbook-core-method/execution-patterns/05-translator.md","sourceDirName":"01-handbook-core-method/execution-patterns","slug":"/01-handbook-core-method/execution-patterns/05-translator","permalink":"/gen-ai-llm-docs/docs/01-handbook-core-method/execution-patterns/05-translator","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"pattern","permalink":"/gen-ai-llm-docs/docs/tags/pattern"},{"inline":true,"label":"translation","permalink":"/gen-ai-llm-docs/docs/tags/translation"},{"inline":true,"label":"migration","permalink":"/gen-ai-llm-docs/docs/tags/migration"},{"inline":true,"label":"polyglot","permalink":"/gen-ai-llm-docs/docs/tags/polyglot"}],"version":"current","lastUpdatedAt":null,"frontMatter":{"title":"Pattern: The Translator","archetype":"pattern","status":"active","owner":"Shailesh (Shaily)","maintainer":"Shailesh (Shaily)","version":"0.1.0","tags":["pattern","translation","migration","polyglot"],"last_reviewed":"2025-12-28"}}');var s=n(74848),r=n(28453);const l={title:"Pattern: The Translator",archetype:"pattern",status:"active",owner:"Shailesh (Shaily)",maintainer:"Shailesh (Shaily)",version:"0.1.0",tags:["pattern","translation","migration","polyglot"],last_reviewed:"2025-12-28"},a="Pattern: The Translator",o={},d=[{value:"Overview",id:"overview",level:2},{value:"When to Use",id:"when-to-use",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"The Pattern (Step-by-Step)",id:"the-pattern-step-by-step",level:2},{value:"Step 1: Source Analysis (The &quot;AST&quot;)",id:"step-1-source-analysis-the-ast",level:3},{value:"Step 2: The Mapping Strategy",id:"step-2-the-mapping-strategy",level:3},{value:"Step 3: The Translation",id:"step-3-the-translation",level:3},{value:"Step 4: Parity Check",id:"step-4-parity-check",level:3},{value:"Example Scenario",id:"example-scenario",level:2},{value:"Practical Example: Migrating SQL Schema to Pydantic",id:"practical-example-migrating-sql-schema-to-pydantic",level:3},{value:"Common Pitfalls",id:"common-pitfalls",level:2},{value:"Last Reviewed / Last Updated",id:"last-reviewed--last-updated",level:2}];function c(e){const t={admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"pattern-the-translator",children:"Pattern: The Translator"})}),"\n",(0,s.jsx)(t.admonition,{title:"Value Proposition",type:"info",children:(0,s.jsx)(t.p,{children:"Use this pattern to convert code, data, or schemas from one format to another with high fidelity. It treats translation as a structural mapping problem, not a creative writing task."})}),"\n",(0,s.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(t.p,{children:"AI is excellent at translation (e.g., Python to Go, SQL to JSON), but it often hallucinates idiomatic differences or tries to translate line-by-line, resulting in non-idiomatic code."}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Goal"}),": Port logic and structure while respecting the destination language's idioms.\n",(0,s.jsx)(t.strong,{children:"Anti-pattern"}),': "Rewrite this in Rust." (Result: Pythonic Rust that fights the borrow checker).']}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"when-to-use",children:"When to Use"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"\u2705 Use This Pattern When..."}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"\ud83d\udeab Do Not Use When..."})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Porting a class from Java to TypeScript"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"You don't know the target language at all"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Converting SQL schemas to Pydantic/Zod"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"The source code is buggy (fix it first)"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Migrating CI pipelines (Jenkins to GHA)"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"You want to refactor logic simultaneously"})]})]})]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsx)(t.admonition,{title:"Before you start",type:"warning",children:(0,s.jsxs)(t.p,{children:["You must have a ",(0,s.jsx)(t.strong,{children:"Constraint Spec"})," for the ",(0,s.jsx)(t.em,{children:"target"}),' language. If you don\'t define the target style, the AI will write "accented" code (e.g., Java-style Python).']})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Input"}),": Source file(s)."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Target"}),": Definition of the destination format/language."]}),"\n"]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"the-pattern-step-by-step",children:"The Pattern (Step-by-Step)"}),"\n",(0,s.jsx)(t.h3,{id:"step-1-source-analysis-the-ast",children:'Step 1: Source Analysis (The "AST")'}),"\n",(0,s.jsxs)(t.p,{children:["Don't translate yet. Ask the AI to describe the ",(0,s.jsx)(t.em,{children:"structure"})," and ",(0,s.jsx)(t.em,{children:"intent"})," of the source."]}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsxs)(t.p,{children:['"Analyze ',(0,s.jsx)(t.code,{children:"User.java"}),'. List the public methods, the state invariants, and any side effects. Do not generate code."']}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"step-2-the-mapping-strategy",children:"Step 2: The Mapping Strategy"}),"\n",(0,s.jsx)(t.p,{children:"Ask the AI to map concepts from Source to Target."}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsxs)(t.p,{children:['"We are porting this to TypeScript. How should we handle the Java ',(0,s.jsx)(t.code,{children:"AbstractFactory"}),' pattern in idiomatic TypeScript? Propose a mapping."']}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.em,{children:"Why? This catches 'False Friends'\u2014concepts that look similar but behave differently."})}),"\n",(0,s.jsx)(t.h3,{id:"step-3-the-translation",children:"Step 3: The Translation"}),"\n",(0,s.jsx)(t.p,{children:"Execute the translation using the agreed mapping."}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsx)(t.p,{children:'"Generate the TypeScript code. Use the mapping from Step 2. Adhere to the Constraint Spec (Functional style, no classes)."'}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"step-4-parity-check",children:"Step 4: Parity Check"}),"\n",(0,s.jsx)(t.p,{children:"Ask the AI to verify its own work."}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsx)(t.p,{children:'"Compare the Java source and the TypeScript output. List any logic that was lost or changed."'}),"\n"]}),"\n",(0,s.jsx)(t.mermaid,{value:"flowchart LR\n    Source[Source Code] --\x3e Analyze[Analyze Logic]\n    Analyze --\x3e Map[Map Concepts]\n    Map --\x3e Target[Target Code]\n    Target --\x3e Verify{Parity Check}\n\n    classDef step fill:#E6F7FF,stroke:#1B75BB,color:#0F1F2E;\n    class Source,Analyze,Map,Target,Verify step;"}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"example-scenario",children:"Example Scenario"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Context"}),": Migrating a raw SQL schema to Pydantic models."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Input"}),": ",(0,s.jsx)(t.code,{children:"CREATE TABLE users (id SERIAL PRIMARY KEY, metadata JSONB);"})]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Mapping"}),": ",(0,s.jsx)(t.code,{children:"SERIAL"})," -> ",(0,s.jsx)(t.code,{children:"int"}),", ",(0,s.jsx)(t.code,{children:"JSONB"})," -> ",(0,s.jsx)(t.code,{children:"Dict[str, Any]"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Output"}),": ",(0,s.jsx)(t.code,{children:"class User(BaseModel): id: int, metadata: Dict[str, Any]"})]}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"practical-example-migrating-sql-schema-to-pydantic",children:"Practical Example: Migrating SQL Schema to Pydantic"}),"\n",(0,s.jsxs)(t.p,{children:["Let's illustrate the translation of a SQL ",(0,s.jsx)(t.code,{children:"CREATE TABLE"})," statement into a Pydantic model."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:'Step 1: Source Analysis (The "AST")'})}),"\n",(0,s.jsxs)(t.p,{children:["Given the SQL schema for a ",(0,s.jsx)(t.code,{children:"products"})," table:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-sql",children:"CREATE TABLE products (\n    product_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    name VARCHAR(255) NOT NULL,\n    description TEXT,\n    price NUMERIC(10, 2) NOT NULL,\n    is_available BOOLEAN DEFAULT TRUE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsxs)(t.strong,{children:["AI's Analysis (Internal thought process/response to a prompt like \"Analyze ",(0,s.jsx)(t.code,{children:"products"}),' table schema"):']})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Table Name"}),": ",(0,s.jsx)(t.code,{children:"products"})]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Columns"}),":","\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"product_id"}),": UUID, Primary Key, default generated UUID."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"name"}),": VARCHAR(255), Not Null."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"description"}),": TEXT, Nullable."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"price"}),": NUMERIC(10, 2), Not Null."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"is_available"}),": BOOLEAN, default TRUE."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"created_at"}),": TIMESTAMP WITH TIME ZONE, default NOW()."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Step 2: The Mapping Strategy"})}),"\n",(0,s.jsx)(t.p,{children:"Prompt the AI:"}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsxs)(t.p,{children:['"Map the above PostgreSQL ',(0,s.jsx)(t.code,{children:"products"})," table schema to a Pydantic V2 ",(0,s.jsx)(t.code,{children:"BaseModel"})," for Python. Ensure UUIDs are ",(0,s.jsx)(t.code,{children:"UUID"})," type, NUMERIC is ",(0,s.jsx)(t.code,{children:"Decimal"}),", and timestamps are ",(0,s.jsx)(t.code,{children:"datetime"})," with timezone awareness. Use ",(0,s.jsx)(t.code,{children:"Field"}),' for default values."']}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"AI's Proposed Mapping (Internal thought process/response):"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"UUID PRIMARY KEY DEFAULT gen_random_uuid()"})," -> ",(0,s.jsx)(t.code,{children:"product_id: UUID = Field(default_factory=uuid4)"})]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"VARCHAR(255) NOT NULL"})," -> ",(0,s.jsx)(t.code,{children:"str"})]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"TEXT"})," -> ",(0,s.jsx)(t.code,{children:"Optional[str]"})]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"NUMERIC(10, 2) NOT NULL"})," -> ",(0,s.jsx)(t.code,{children:"Decimal"})]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"BOOLEAN DEFAULT TRUE"})," -> ",(0,s.jsx)(t.code,{children:"bool = Field(default=True)"})]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"TIMESTAMP WITH TIME ZONE DEFAULT NOW()"})," -> ",(0,s.jsx)(t.code,{children:"datetime = Field(default_factory=lambda: datetime.now(timezone.utc))"})]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Step 3: The Translation"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"from datetime import datetime, timezone\nfrom decimal import Decimal\nfrom typing import Optional\nfrom uuid import UUID, uuid4\n\nfrom pydantic import BaseModel, Field\n\nclass Product(BaseModel):\n    product_id: UUID = Field(default_factory=uuid4)\n    name: str\n    description: Optional[str] = None # Pydantic handles Optional[str] and default None for nullable fields\n    price: Decimal\n    is_available: bool = Field(default=True)\n    created_at: datetime = Field(default_factory=lambda: datetime.now(timezone.utc))\n\n    class Config:\n        json_encoders = {\n            UUID: str, # For JSON serialization\n            datetime: lambda dt: dt.isoformat(),\n            Decimal: float,\n        }\n        from_attributes = True # Pydantic V2: previously `orm_mode`\n"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Step 4: Parity Check"})}),"\n",(0,s.jsxs)(t.p,{children:["A human review confirms the mapping correctly translates types and default behaviors, and an initial test ensures object creation and serialization work as expected.\nFor instance, a ",(0,s.jsx)(t.code,{children:'Product(name="Test", price=10.99)'})," should automatically get a ",(0,s.jsx)(t.code,{children:"product_id"})," and ",(0,s.jsx)(t.code,{children:"created_at"}),"."]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"common-pitfalls",children:"Common Pitfalls"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Pitfall"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Impact"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Correction"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"Line-by-Line Porting"})}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["Unidiomatic code (e.g., ",(0,s.jsx)(t.code,{children:"for"})," loops in SQL)."]}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:'Ask for "Idiomatic translation," not "Rewrite".'})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"Library Hallucination"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Inventing a target library to match a source one."}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:'Constraint: "Only use standard library."'})]})]})]}),"\n",(0,s.jsx)(t.admonition,{title:"Critical Risk",type:"danger",children:(0,s.jsx)(t.p,{children:"Regex and Date formats rarely translate 1:1. Always write unit tests for these specific edge cases in the new language."})}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"last-reviewed--last-updated",children:"Last Reviewed / Last Updated"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Last reviewed: 2025-12-28"}),"\n",(0,s.jsx)(t.li,{children:"Version: 0.1.0"}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);