"use strict";(self.webpackChunkgenai_llm_documentation_website=self.webpackChunkgenai_llm_documentation_website||[]).push([[181],{28453(e,n,t){t.d(n,{R:()=>o,x:()=>a});var s=t(96540);const r={},i=s.createContext(r);function o(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:n},e.children)}},64662(e,n,t){t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"01-handbook-core-method/execution-patterns/11-write-docs","title":"Pattern: The Doc-Smith","description":"Use this pattern to generate accurate, maintainable documentation from code. It prevents the \\"docs drift\\" where documentation lags behind reality.","source":"@site/../docs/01-handbook-core-method/execution-patterns/11-write-docs.md","sourceDirName":"01-handbook-core-method/execution-patterns","slug":"/01-handbook-core-method/execution-patterns/11-write-docs","permalink":"/gen-ai-llm-docs/docs/01-handbook-core-method/execution-patterns/11-write-docs","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"pattern","permalink":"/gen-ai-llm-docs/docs/tags/pattern"},{"inline":true,"label":"documentation","permalink":"/gen-ai-llm-docs/docs/tags/documentation"},{"inline":true,"label":"writing","permalink":"/gen-ai-llm-docs/docs/tags/writing"}],"version":"current","lastUpdatedAt":null,"frontMatter":{"title":"Pattern: The Doc-Smith","archetype":"pattern","status":"active","owner":"Shailesh (Shaily)","maintainer":"Shailesh (Shaily)","version":"0.1.0","tags":["pattern","documentation","writing"],"last_reviewed":"2025-12-28"}}');var r=t(74848),i=t(28453);const o={title:"Pattern: The Doc-Smith",archetype:"pattern",status:"active",owner:"Shailesh (Shaily)",maintainer:"Shailesh (Shaily)",version:"0.1.0",tags:["pattern","documentation","writing"],last_reviewed:"2025-12-28"},a="Pattern: The Doc-Smith",d={},l=[{value:"Overview",id:"overview",level:2},{value:"When to Use",id:"when-to-use",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"The Pattern (Step-by-Step)",id:"the-pattern-step-by-step",level:2},{value:"Step 1: Context Injection",id:"step-1-context-injection",level:3},{value:"Step 2: Define the Audience",id:"step-2-define-the-audience",level:3},{value:"Step 3: The Structure First",id:"step-3-the-structure-first",level:3},{value:"Step 4: Generation",id:"step-4-generation",level:3},{value:"Common Pitfalls",id:"common-pitfalls",level:2},{value:"Practical Example: Generating API Documentation for a <code>auth.ts</code> Module",id:"practical-example-generating-api-documentation-for-a-authts-module",level:3},{value:"Usage",id:"usage",level:2},{value:"<code>hashPassword(password: string): Promise&lt;string&gt;</code>",id:"hashpasswordpassword-string-promisestring",level:3},{value:"<code>comparePassword(password: string, hashedPassword: string): Promise&lt;boolean&gt;</code>",id:"comparepasswordpassword-string-hashedpassword-string-promiseboolean",level:3},{value:"<code>generateToken(userId: string): string</code>",id:"generatetokenuserid-string-string",level:3},{value:"<code>verifyToken(token: string): { userId: string }</code>",id:"verifytokentoken-string--userid-string-",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Error Handling",id:"error-handling",level:2}];function c(e){const n={admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"pattern-the-doc-smith",children:"Pattern: The Doc-Smith"})}),"\n",(0,r.jsx)(n.admonition,{title:"Value Proposition",type:"info",children:(0,r.jsx)(n.p,{children:'Use this pattern to generate accurate, maintainable documentation from code. It prevents the "docs drift" where documentation lags behind reality.'})}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"AI is excellent at explaining code, but it tends to be verbose and salesy."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Goal"}),": Create concise, technical documentation that matches the code exactly.\n",(0,r.jsx)(n.strong,{children:"Anti-pattern"}),': "Write docs for this." (Result: Marketing fluff).']}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"when-to-use",children:"When to Use"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"\u2705 Use This Pattern When..."}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"\ud83d\udeab Do Not Use When..."})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Documenting a new API endpoint"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Writing a marketing blog post"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Creating a README for a tool"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Writing a legal disclaimer"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Explaining a complex regex"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Documenting unwritten code"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(n.admonition,{title:"Before you start",type:"warning",children:(0,r.jsx)(n.p,{children:"The code must be stable. Do not document code that is about to change."})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Input"}),": The actual source code files."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Style Guide"}),': A brief definition of tone (e.g., "Terse, professional").']}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"the-pattern-step-by-step",children:"The Pattern (Step-by-Step)"}),"\n",(0,r.jsx)(n.h3,{id:"step-1-context-injection",children:"Step 1: Context Injection"}),"\n",(0,r.jsx)(n.p,{children:"Feed the code to the model."}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:['"Read ',(0,r.jsx)(n.code,{children:"src/utils/auth.ts"}),'. Do not summarize it yet."']}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-2-define-the-audience",children:"Step 2: Define the Audience"}),"\n",(0,r.jsx)(n.p,{children:"Tell the AI who is reading."}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:'"You are writing for a Senior DevOps Engineer. Assume they know what OAuth is. Do not explain basic concepts."'}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-3-the-structure-first",children:"Step 3: The Structure First"}),"\n",(0,r.jsx)(n.p,{children:"Ask for the Table of Contents."}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:'"Propose a structure for the README. It must include: Overview, Configuration, and Troubleshooting."'}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-4-generation",children:"Step 4: Generation"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:'"Write the content. Use code blocks for examples. Keep paragraphs under 3 sentences."'}),"\n"]}),"\n",(0,r.jsx)(n.mermaid,{value:"flowchart LR\n    Code[Source Code] --\x3e Audience[Audience Def]\n    Audience --\x3e Struct[Structure]\n    Struct --\x3e Docs[Final Docs]\n\n    classDef step fill:#E6F7FF,stroke:#1B75BB,color:#0F1F2E;\n    class Code,Audience,Struct,Docs step;"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"common-pitfalls",children:"Common Pitfalls"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Pitfall"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Impact"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Correction"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.strong,{children:"Hallucinated Features"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Docs describe features you don't have."}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:'Explicitly say "Only document what is in the code."'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.strong,{children:"Marketing Tone"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:'"This amazing tool..."'}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:'Add constraint: "No hype. No adjectives."'})]})]})]}),"\n",(0,r.jsx)(n.admonition,{title:"Pro Tip",type:"tip",children:(0,r.jsx)(n.p,{children:'Ask the AI to generate a "Troubleshooting" section based on the error handling logic it sees in the code.'})}),"\n",(0,r.jsxs)(n.h3,{id:"practical-example-generating-api-documentation-for-a-authts-module",children:["Practical Example: Generating API Documentation for a ",(0,r.jsx)(n.code,{children:"auth.ts"})," Module"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Objective"}),": Generate clear, concise technical documentation for a TypeScript authentication utility module."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["Sample Code (",(0,r.jsx)(n.code,{children:"src/utils/auth.ts"}),"):"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// src/utils/auth.ts\nimport jwt from 'jsonwebtoken';\nimport bcrypt from 'bcryptjs';\n\nconst JWT_SECRET = process.env.JWT_SECRET || 'supersecretjwtkey';\nconst BCRYPT_SALT_ROUNDS = 10;\n\n/**\n * Hashes a plain-text password using bcrypt.\n * @param password - The plain-text password to hash.\n * @returns A promise that resolves to the hashed password string.\n */\nexport async function hashPassword(password: string): Promise<string> {\n  const salt = await bcrypt.genSalt(BCRYPT_SALT_ROUNDS);\n  return bcrypt.hash(password, salt);\n}\n\n/**\n * Compares a plain-text password with a hashed password.\n * @param password - The plain-text password.\n * @param hashedPassword - The hashed password to compare against.\n * @returns A promise that resolves to true if passwords match, false otherwise.\n */\nexport async function comparePassword(password: string, hashedPassword: string): Promise<boolean> {\n  return bcrypt.compare(password, hashedPassword);\n}\n\n/**\n * Generates a JSON Web Token (JWT) for a given user ID.\n * @param userId - The ID of the user.\n * @returns A signed JWT string.\n */\nexport function generateToken(userId: string): string {\n  return jwt.sign({ userId }, JWT_SECRET, { expiresIn: '1h' });\n}\n\n/**\n * Verifies a JWT token and returns the decoded payload.\n * @param token - The JWT token string.\n * @returns The decoded token payload if valid, otherwise throws an error.\n * @throws {JsonWebTokenError} If the token is invalid or expired.\n */\nexport function verifyToken(token: string): { userId: string } {\n  return jwt.verify(token, JWT_SECRET) as { userId: string };\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:'AI Prompt Following "The Doc-Smith" Pattern:'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-markdown",children:'"Given the TypeScript file `src/utils/auth.ts`:\n\n1.  **Context Injection**: Read the entire file content.\n2.  **Define the Audience**: Generate documentation for a backend developer who is integrating this module. Assume familiarity with basic security concepts like hashing and JWTs.\n3.  **The Structure First**: Propose a README-like structure. It must include:\n    -   Overview\n    -   Installation (brief, assumes npm/yarn)\n    -   Usage (for each exported function)\n    -   Configuration (JWT_SECRET, BCRYPT_SALT_ROUNDS)\n    -   Error Handling\n4.  **Generation**: Write the content for each section. Keep it concise, professional, and directly derived from the code. Use TypeScript code blocks for usage examples. Ensure `JWT_SECRET` is mentioned as an environment variable. Do not include any marketing fluff or superlatives.\n"\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Expected AI-Generated Documentation (Example):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-markdown",children:"# `auth.ts` Module Documentation\n\n## Overview\n\nThis module provides utility functions for user authentication, including password hashing, comparison, and JSON Web Token (JWT) generation and verification.\n\n## Installation\n\nThis module is part of a Node.js project. Ensure `bcryptjs` and `jsonwebtoken` are installed as dependencies.\n\n```bash\nnpm install bcryptjs jsonwebtoken\n# or\nyarn add bcryptjs jsonwebtoken\n"})}),"\n",(0,r.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,r.jsx)(n.h3,{id:"hashpasswordpassword-string-promisestring",children:(0,r.jsx)(n.code,{children:"hashPassword(password: string): Promise<string>"})}),"\n",(0,r.jsxs)(n.p,{children:["Hashes a plain-text password using ",(0,r.jsx)(n.code,{children:"bcrypt"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { hashPassword } from './src/utils/auth';\n\nasync function registerUser(plainTextPassword: string) {\n  const hashedPassword = await hashPassword(plainTextPassword);\n  console.log('Hashed Password:', hashedPassword);\n  // Store hashedPassword in database\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"comparepasswordpassword-string-hashedpassword-string-promiseboolean",children:(0,r.jsx)(n.code,{children:"comparePassword(password: string, hashedPassword: string): Promise<boolean>"})}),"\n",(0,r.jsx)(n.p,{children:"Compar es a plain-text password with a hashed password."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { comparePassword } from './src/utils/auth';\n\nasync function loginUser(plainTextPassword: string, storedHashedPassword: string) {\n  const isMatch = await comparePassword(plainTextPassword, storedHashedPassword);\n  if (isMatch) {\n    console.log('Passwords match!');\n  } else {\n    console.log('Passwords do not match.');\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"generatetokenuserid-string-string",children:(0,r.jsx)(n.code,{children:"generateToken(userId: string): string"})}),"\n",(0,r.jsx)(n.p,{children:"Generates a signed JSON Web Token (JWT) for a given user ID. The token expires in 1 hour."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { generateToken } from './src/utils/auth';\n\nconst userId = 'some-user-id-123';\nconst token = generateToken(userId);\nconsole.log('Generated JWT:', token);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"verifytokentoken-string--userid-string-",children:(0,r.jsx)(n.code,{children:"verifyToken(token: string): { userId: string }"})}),"\n",(0,r.jsx)(n.p,{children:"Verifies a JWT token and returns the decoded payload."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { verifyToken } from './src/utils/auth';\n\nconst token = 'your.jwt.token.here';\ntry {\n  const decoded = verifyToken(token);\n  console.log('Decoded User ID:', decoded.userId);\n} catch (error) {\n  console.error('Token verification failed:', error.message);\n  // Handle JsonWebTokenError (e.g., TokenExpiredError, JsonWebTokenError)\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"JWT_SECRET"}),": The secret key used for signing and verifying JWTs. This ",(0,r.jsx)(n.strong,{children:"must"})," be set as an environment variable (",(0,r.jsx)(n.code,{children:"process.env.JWT_SECRET"}),"). A default value is used if not provided, which is ",(0,r.jsx)(n.strong,{children:"not recommended for production"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BCRYPT_SALT_ROUNDS"}),": The number of salt rounds for bcrypt hashing. Currently set to ",(0,r.jsx)(n.code,{children:"10"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"verifyToken"})," will throw a ",(0,r.jsx)(n.code,{children:"JsonWebTokenError"})," if the provided token is invalid (e.g., malformed, expired, invalid signature). Callers should wrap ",(0,r.jsx)(n.code,{children:"verifyToken"})," in a ",(0,r.jsx)(n.code,{children:"try-catch"})," block to handle these errors."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);