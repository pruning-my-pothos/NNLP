"use strict";(self.webpackChunkgenai_llm_documentation_website=self.webpackChunkgenai_llm_documentation_website||[]).push([[4923],{28453(e,t,n){n.d(t,{R:()=>l,x:()=>o});var s=n(96540);const i={},r=s.createContext(i);function l(e){const t=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(r.Provider,{value:t},e.children)}},55765(e,t,n){n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"foundations/02-llm-deep-dive/fundamentals/05-structured-output-and-tool-use","title":"Structured Output and Tool Use","description":"Move beyond natural language generation to enable LLMs to produce data in predictable formats (e.g., JSON, YAML, XML) and interact with external systems (APIs, databases). This is essential for integrating LLMs into automated workflows and building reliable AI-assisted applications within GenAI & LLM Documentation.","source":"@site/../docs/foundations/02-llm-deep-dive/fundamentals/05-structured-output-and-tool-use.md","sourceDirName":"foundations/02-llm-deep-dive/fundamentals","slug":"/foundations/02-llm-deep-dive/fundamentals/05-structured-output-and-tool-use","permalink":"/gen-ai-llm-docs/docs/foundations/02-llm-deep-dive/fundamentals/05-structured-output-and-tool-use","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"genai-llm","permalink":"/gen-ai-llm-docs/docs/tags/genai-llm"},{"inline":true,"label":"structured-output","permalink":"/gen-ai-llm-docs/docs/tags/structured-output"},{"inline":true,"label":"tools","permalink":"/gen-ai-llm-docs/docs/tags/tools"},{"inline":true,"label":"schema","permalink":"/gen-ai-llm-docs/docs/tags/schema"},{"inline":true,"label":"apis","permalink":"/gen-ai-llm-docs/docs/tags/apis"}],"version":"current","lastUpdatedAt":null,"frontMatter":{"title":"Structured Output and Tool Use","archetype":"fundamentals","status":"active","owner":"Shailesh (Shaily)","maintainer":"Shailesh (Shaily)","version":"0.1.0","tags":["genai-llm","structured-output","tools","schema","apis"],"last_reviewed":"2025-12-28"},"sidebar":"mainSidebar","previous":{"title":"Retrieval and Grounding (RAG)","permalink":"/gen-ai-llm-docs/docs/foundations/02-llm-deep-dive/fundamentals/04-retrieval-and-grounding-rag"},"next":{"title":"Agents and Orchestration Basics","permalink":"/gen-ai-llm-docs/docs/foundations/02-llm-deep-dive/fundamentals/06-agents-and-orchestration-basics"}}');var i=n(74848),r=n(28453);const l={title:"Structured Output and Tool Use",archetype:"fundamentals",status:"active",owner:"Shailesh (Shaily)",maintainer:"Shailesh (Shaily)",version:"0.1.0",tags:["genai-llm","structured-output","tools","schema","apis"],last_reviewed:"2025-12-28"},o="Structured Output and Tool Use",a={},d=[{value:"Overview",id:"overview",level:2},{value:"When to Use",id:"when-to-use",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Structured Output",id:"structured-output",level:2},{value:"Techniques for Structured Output",id:"techniques-for-structured-output",level:3},{value:"Example: Generating JSON Output",id:"example-generating-json-output",level:3},{value:"Tool Use (Function Calling)",id:"tool-use-function-calling",level:2},{value:"How Tool Use Works",id:"how-tool-use-works",level:3},{value:"Example: Calling a Weather API",id:"example-calling-a-weather-api",level:3},{value:"Integration with GenAI &amp; LLM Documentation",id:"integration-with-genai--llm-documentation",level:2},{value:"Common Pitfalls",id:"common-pitfalls",level:2},{value:"Last Reviewed / Last Updated",id:"last-reviewed--last-updated",level:2}];function c(e){const t={admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"structured-output-and-tool-use",children:"Structured Output and Tool Use"})}),"\n",(0,i.jsx)(t.admonition,{title:"Value Proposition",type:"info",children:(0,i.jsx)(t.p,{children:"Move beyond natural language generation to enable LLMs to produce data in predictable formats (e.g., JSON, YAML, XML) and interact with external systems (APIs, databases). This is essential for integrating LLMs into automated workflows and building reliable AI-assisted applications within GenAI & LLM Documentation."})}),"\n",(0,i.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(t.p,{children:"While LLMs excel at generating free-form text, many GenAI & LLM Documentation tasks require structured outputs that can be parsed and acted upon by other software components. Furthermore, to perform complex, multi-step tasks, LLMs need the ability to use external tools. This document explores techniques for guiding LLMs to produce structured data and how to enable them to invoke and interpret external tool calls, transforming them from text generators into agents capable of interacting with the world."}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Goal"}),": Enable LLMs to produce machine-readable output and execute actions through external tools.\n",(0,i.jsx)(t.strong,{children:"Anti-pattern"}),": Expecting an LLM to reliably generate complex code or interact with APIs solely through free-form conversational prompts, leading to unreliable parsing and execution failures."]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"when-to-use",children:"When to Use"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"\u2705 Use This Pattern When..."}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"\ud83d\udeab Do Not Use When..."})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Generating API requests or data models"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"The LLM's output is purely for human consumption (e.g., creative writing)"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Automating code generation or refactoring"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"The external tool requires complex human judgment for every step"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Integrating LLMs with external APIs or databases"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"The LLM's only purpose is to summarize or extract information from text"})]})]})]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsx)(t.admonition,{title:"Before you start",type:"warning",children:(0,i.jsx)(t.p,{children:"A clear understanding of the desired output format (e.g., JSON schema) and the APIs/tools the LLM needs to interact with."})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Artifacts"}),": Defined schemas (e.g., OpenAPI, JSON Schema). Documented APIs."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Context"}),": Familiarity with how to describe tool functionalities to an LLM."]}),"\n"]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"structured-output",children:"Structured Output"}),"\n",(0,i.jsx)(t.h3,{id:"techniques-for-structured-output",children:"Techniques for Structured Output"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Direct Instruction"}),": Explicitly ask the LLM for a specific format."]}),"\n",(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsx)(t.p,{children:'"Generate the response as a JSON object."'}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Schema Definition"}),": Provide the LLM with a formal schema (e.g., JSON Schema, TypeScript interfaces)."]}),"\n",(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsxs)(t.p,{children:['"Generate a TypeScript interface for a ',(0,i.jsx)(t.code,{children:"User"})," object that conforms to the following JSON Schema: ",(0,i.jsx)(t.code,{children:"{ ... }"}),'"']}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Few-shot Examples"}),": Give the LLM examples of the desired structured output."]}),"\n",(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsxs)(t.p,{children:['"Here is an example of a valid API response: ',(0,i.jsx)(t.code,{children:"{'status': 'success', 'data': {...}}"}),'. Generate a similar response for X."']}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Grammar/Format Constraints"}),": Use specific libraries (e.g., ",(0,i.jsx)(t.code,{children:"lm-format-enforcer"})," in Python) or prompt techniques that force the LLM to adhere to a grammar."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"example-generating-json-output",children:"Example: Generating JSON Output"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Prompt"}),":"]}),"\n",(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsxs)(t.p,{children:['"Generate a JSON object for a product. It should have ',(0,i.jsx)(t.code,{children:"name"})," (string), ",(0,i.jsx)(t.code,{children:"price"})," (number), `` (boolean), and ",(0,i.jsx)(t.code,{children:"tags"}),' (array of strings)."']}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"LLM Output"}),":"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-json",children:'{\n  "name": "Wireless Ergonomic Mouse",\n  "price": 49.99,\n  "inStock": true,\n  "tags": ["peripherals", "ergonomic", "wireless"]\n}\n'})}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"tool-use-function-calling",children:"Tool Use (Function Calling)"}),"\n",(0,i.jsxs)(t.p,{children:["Tool use (also known as function calling) enables LLMs to interact with external systems by calling predefined functions. The LLM's role shifts from merely generating text to generating ",(0,i.jsx)(t.em,{children:"arguments for functions"})," that then perform real-world actions."]}),"\n",(0,i.jsx)(t.h3,{id:"how-tool-use-works",children:"How Tool Use Works"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Define Tools"}),": You provide the LLM with a description of available functions, including their names, parameters, and what they do (often using schemas)."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"User Request"}),": The user makes a request that might require an external action."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"LLM Determines Tool"}),": The LLM analyzes the request and decides if a tool is needed. If so, it generates the arguments to call that tool."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Execute Tool"}),": Your application code executes the tool with the LLM-generated arguments."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"LLM Gets Tool Output"}),": The output of the tool is fed back to the LLM."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"LLM Responds"}),": The LLM generates a final, informed response to the user."]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"example-calling-a-weather-api",children:"Example: Calling a Weather API"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Tool Definition (provided to LLM):"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-json",children:'{\n  "name": "getCurrentWeather",\n  "description": "Get the current weather for a location",\n  "parameters": {\n    "type": "object",\n    "properties": {\n      "location": {\n        "type": "string",\n        "description": "The city and state, e.g. San Francisco, CA"\n      },\n      "unit": {"type": "string", "enum": ["celsius", "fahrenheit"]}\n    },\n    "required": ["location"]\n  }\n}\n'})}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"User Request"}),': "What\'s the weather like in Boston?"']}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"LLM Tool Call (generated by LLM):"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-json",children:'{\n  "tool_name": "getCurrentWeather",\n  "parameters": {\n    "location": "Boston, MA"\n  }\n}\n'})}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"integration-with-genai--llm-documentation",children:"Integration with GenAI & LLM Documentation"}),"\n",(0,i.jsx)(t.p,{children:"Structured output and tool use are fundamental to building agents and automated workflows in GenAI & LLM Documentation."}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Generation Requests"}),": Can explicitly ask for structured output or for the AI to make a tool call."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Constraint Specs"}),": Can define the required schema for generated data or the specific tools that can be used."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Delegation Contracts"}),": Can specify which tools the AI is permitted/prohibited from using."]}),"\n"]}),"\n",(0,i.jsx)(t.mermaid,{value:"flowchart LR\n    Request[User Request] --\x3e ToolDef[Tool Definitions]\n    Request & ToolDef --\x3e LLM[LLM]\n    LLM --\x3e ToolCall[Tool Call w/ Args]\n    ToolCall --\x3e External[External System]\n    External --\x3e ToolOutput[Tool Output]\n    ToolOutput --\x3e LLM\n    LLM --\x3e Response[Final Response]\n\n    classDef step fill:#E6F7FF,stroke:#1B75BB,color:#0F1F2E;\n    class Request,ToolDef,LLM,ToolCall,External,ToolOutput,Response step;"}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"common-pitfalls",children:"Common Pitfalls"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Pitfall"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Impact"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Correction"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.strong,{children:"Vague Schema Definitions"})}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"LLM generates invalid or incomplete structured data."}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Provide clear, explicit JSON Schemas or type definitions."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.strong,{children:"Underspecified Tool Descriptions"})}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"LLM calls tools with incorrect arguments or in wrong situations."}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Make tool descriptions precise, including parameter types and examples."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.strong,{children:"Ignoring Tool Output"})}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"LLM doesn't use tool results to inform its response, leading to errors."}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Ensure tool output is correctly fed back to the LLM and prompt it to use that context."})]})]})]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"last-reviewed--last-updated",children:"Last Reviewed / Last Updated"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Last reviewed: 2025-12-28"}),"\n",(0,i.jsx)(t.li,{children:"Version: 0.1.0"}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);