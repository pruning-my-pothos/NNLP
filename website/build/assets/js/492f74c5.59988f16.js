"use strict";(self.webpackChunkgenai_llm_documentation_website=self.webpackChunkgenai_llm_documentation_website||[]).push([[1375],{28453(e,n,t){t.d(n,{R:()=>a,x:()=>o});var s=t(96540);const i={},r=s.createContext(i);function a(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:n},e.children)}},69060(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"02-execution-patterns/03-design-an-api","title":"Pattern: Design an API","description":"Use this pattern to leverage AI for designing clear, consistent, and well-structured APIs. It helps in defining endpoints, request/response schemas, and error handling, adhering to best practices like REST or GraphQL, and ensuring interoperability.","source":"@site/../docs/02-execution-patterns/03-design-an-api.md","sourceDirName":"02-execution-patterns","slug":"/02-execution-patterns/03-design-an-api","permalink":"/gen-ai-llm-docs/docs/02-execution-patterns/03-design-an-api","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"pattern","permalink":"/gen-ai-llm-docs/docs/tags/pattern"},{"inline":true,"label":"api-design","permalink":"/gen-ai-llm-docs/docs/tags/api-design"},{"inline":true,"label":"rest","permalink":"/gen-ai-llm-docs/docs/tags/rest"},{"inline":true,"label":"graphql","permalink":"/gen-ai-llm-docs/docs/tags/graphql"}],"version":"current","lastUpdatedAt":null,"frontMatter":{"title":"Pattern: Design an API","archetype":"pattern","status":"active","owner":"Shailesh (Shaily)","maintainer":"Shailesh (Shaily)","version":"0.1.0","tags":["pattern","api-design","rest","graphql"],"last_reviewed":"2025-12-28"},"sidebar":"mainSidebar","previous":{"title":"Pattern: The Strangler","permalink":"/gen-ai-llm-docs/docs/02-execution-patterns/02-strangler-refactor"},"next":{"title":"Pattern: The Translator","permalink":"/gen-ai-llm-docs/docs/02-execution-patterns/03-translator"}}');var i=t(74848),r=t(28453);const a={title:"Pattern: Design an API",archetype:"pattern",status:"active",owner:"Shailesh (Shaily)",maintainer:"Shailesh (Shaily)",version:"0.1.0",tags:["pattern","api-design","rest","graphql"],last_reviewed:"2025-12-28"},o="Pattern: Design an API",l={},d=[{value:"Overview",id:"overview",level:2},{value:"When to Use",id:"when-to-use",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"The Pattern (Step-by-Step)",id:"the-pattern-step-by-step",level:2},{value:"Step 1: Identify Resources and Actions",id:"step-1-identify-resources-and-actions",level:3},{value:"Step 2: Define Request and Response Schemas",id:"step-2-define-request-and-response-schemas",level:3},{value:"Step 3: Specify Authentication and Authorization",id:"step-3-specify-authentication-and-authorization",level:3},{value:"Step 4: Detail Error Handling",id:"step-4-detail-error-handling",level:3},{value:"Practical Example: Designing a Simple Blog API (RESTful)",id:"practical-example-designing-a-simple-blog-api-restful",level:3},{value:"Common Pitfalls",id:"common-pitfalls",level:2}];function c(e){const n={admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"pattern-design-an-api",children:"Pattern: Design an API"})}),"\n",(0,i.jsx)(n.admonition,{title:"Value Proposition",type:"info",children:(0,i.jsx)(n.p,{children:"Use this pattern to leverage AI for designing clear, consistent, and well-structured APIs. It helps in defining endpoints, request/response schemas, and error handling, adhering to best practices like REST or GraphQL, and ensuring interoperability."})}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"Designing an API is a critical step in software development, dictating how different components or services communicate. AI can assist in translating high-level requirements into detailed API specifications, including defining resources, HTTP methods, data models, and authentication mechanisms, thereby accelerating development and reducing design flaws."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Goal"}),": Generate a comprehensive API design specification (e.g., OpenAPI, GraphQL schema) from functional requirements.\n",(0,i.jsx)(n.strong,{children:"Anti-pattern"}),': Asking the AI to "create an API" without defining resources, actions, or expected data, leading to a generic and often unsuitable design.']}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"when-to-use",children:"When to Use"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"\u2705 Use This Pattern When..."}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"\ud83d\udeab Do Not Use When..."})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Defining new service boundaries"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"The API is trivial and well-understood"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Expanding existing API capabilities"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"The API requires highly specialized, non-standard protocols"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Ensuring API consistency across a large system"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"The API has already been fully specified and implemented"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsx)(n.admonition,{title:"Before you start",type:"warning",children:(0,i.jsxs)(n.p,{children:["You must have a clear ",(0,i.jsx)(n.strong,{children:"Intent Spec"})," outlining the API's purpose and a ",(0,i.jsx)(n.strong,{children:"Constraint Spec"})," detailing technical requirements."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Artifacts"}),": Intent Spec (API purpose, main entities/resources), Constraint Spec (preferred API style - REST/GraphQL, authentication, error handling conventions, data types)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Context"}),": Understanding of the system's architecture and existing APIs to ensure integration."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"the-pattern-step-by-step",children:"The Pattern (Step-by-Step)"}),"\n",(0,i.jsx)(n.h3,{id:"step-1-identify-resources-and-actions",children:"Step 1: Identify Resources and Actions"}),"\n",(0,i.jsx)(n.p,{children:"List the primary entities (resources) your API will manage and the actions (operations) that can be performed on them. This forms the core of your API."}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Practical Insight"}),': Think nouns (resources) and verbs (actions). For a "User" resource, common actions are ',(0,i.jsx)(n.code,{children:"create"}),", ",(0,i.jsx)(n.code,{children:"read"}),", ",(0,i.jsx)(n.code,{children:"update"}),", ",(0,i.jsx)(n.code,{children:"delete"}),". Map these to HTTP methods for REST or mutations/queries for GraphQL."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"step-2-define-request-and-response-schemas",children:"Step 2: Define Request and Response Schemas"}),"\n",(0,i.jsx)(n.p,{children:"For each endpoint/operation, specify the expected input (request body, query parameters, headers) and the output (successful response, error responses). Use a schema definition language like JSON Schema or GraphQL SDL."}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:['"For the ',(0,i.jsx)(n.code,{children:"POST /users"}),' endpoint, define a request body schema for user creation (username, email, password) and a response schema for a newly created user (id, username, email, createdAt)."']}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"step-3-specify-authentication-and-authorization",children:"Step 3: Specify Authentication and Authorization"}),"\n",(0,i.jsx)(n.p,{children:"Clearly outline how users or other services will authenticate with the API and what authorization rules apply to each endpoint or resource."}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:['"Authentication will be JWT-based. ',(0,i.jsx)(n.code,{children:"POST /users"})," requires no authentication. ",(0,i.jsx)(n.code,{children:"GET /users/{id}"}),' requires an authenticated user and authorization to view their own profile or admin privileges."']}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"step-4-detail-error-handling",children:"Step 4: Detail Error Handling"}),"\n",(0,i.jsx)(n.p,{children:"Define a consistent error response structure for various error types (validation errors, not found, unauthorized, internal server errors) and their corresponding HTTP status codes."}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:['"All errors should return a JSON object like ',(0,i.jsx)(n.code,{children:"{ 'code': 'USER_NOT_FOUND', 'message': 'User with ID {id} not found' }"}),' with appropriate HTTP status codes (e.g., 404, 400, 401, 500)."']}),"\n"]}),"\n",(0,i.jsx)(n.mermaid,{value:"flowchart LR\n    A[Identify Resources/Actions] --\x3e B[Define Schemas]\n    B --\x3e C[Specify Auth/Authz]\n    C --\x3e D[Detail Error Handling]\n\n    classDef step fill:#E6F7FF,stroke:#1B75BB,color:#0F1F2E;\n    class A,B,C,D step;"}),"\n",(0,i.jsx)(n.h3,{id:"practical-example-designing-a-simple-blog-api-restful",children:"Practical Example: Designing a Simple Blog API (RESTful)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Objective"}),": Design a RESTful API for a simple blog with posts and comments."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Task Definition for AI:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-markdown",children:"**Intent:** Design a RESTful API for managing blog posts and their comments.\n\n**In-Scope:**\n-   **Resources**: `Post`, `Comment`.\n-   **Actions for Post**: Create, Read (single, list), Update, Delete.\n-   **Actions for Comment**: Create, Read (single, list by post), Delete.\n\n**Out-of-Scope:**\n-   User authentication/authorization (assume public read, authenticated write for simplicity).\n-   Image uploads.\n-   Search functionality beyond basic filtering.\n\n**Constraints:**\n-   **API Style**: RESTful.\n-   **Data Format**: JSON for requests and responses.\n-   **HTTP Methods**: Use standard methods (GET, POST, PUT, DELETE).\n-   **Status Codes**: Use standard HTTP status codes (200, 201, 204, 400, 401, 403, 404, 500).\n-   **Error Structure**: `{ \"error\": \"Error message\", \"code\": \"ERROR_CODE\" }`.\n-   **Pagination**: Use `_limit` and `_start` query parameters.\n\n**Desired Output:**\n-   OpenAPI (Swagger) 3.0 specification in YAML format, detailing:\n    -   Endpoints for `/posts` and `/posts/{postId}/comments`.\n    -   Request and response schemas for `Post` and `Comment` objects.\n    -   Example requests and responses.\n    -   Basic error responses.\n\n```yaml\n# Example snippet of desired OpenAPI output\nopenapi: 3.0.0\ninfo:\n  title: Simple Blog API\n  version: 1.0.0\npaths:\n  /posts:\n    get:\n      summary: Retrieve a list of blog posts\n      parameters:\n        - in: query\n          name: _limit\n          schema:\n            type: integer\n            default: 10\n        - in: query\n          name: _start\n          schema:\n            type: integer\n            default: 0\n      responses:\n        '200':\n          description: A list of posts\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  $ref: '#/components/schemas/Post'\n    post:\n      summary: Create a new blog post\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/NewPost'\n      responses:\n        '201':\n          description: Post created successfully\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Post'\ncomponents:\n  schemas:\n    Post:\n      type: object\n      properties:\n        id:\n          type: string\n        title:\n          type: string\n        content:\n          type: string\n        author:\n          type: string\n        createdAt:\n          type: string\n          format: date-time\n    NewPost:\n      type: object\n      properties:\n        title:\n          type: string\n        content:\n          type: string\n        author:\n          type: string\n      required:\n        - title\n        - content\n        - author\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"common-pitfalls",children:"Common Pitfalls"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Pitfall"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Impact"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Correction"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"Inconsistent Naming"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Hard to understand and use the API."}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Define clear naming conventions for resources, fields, and endpoints."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"Lack of Versioning Strategy"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Breaks client applications with changes."}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["Establish a clear versioning strategy (e.g., ",(0,i.jsx)(n.code,{children:"/v1/"}),", header-based)."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"Insufficient Error Detail"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Debugging becomes difficult for consumers."}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Provide specific error codes and messages for common failure scenarios."})]})]})]}),"\n",(0,i.jsx)(n.admonition,{title:"Critical Risk",type:"danger",children:(0,i.jsx)(n.p,{children:"Always involve human review for API designs, especially for security, data privacy, and long-term maintainability. AI-generated designs should be treated as a strong starting point, not a final product."})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);