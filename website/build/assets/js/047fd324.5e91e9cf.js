"use strict";(self.webpackChunkgenai_llm_documentation_website=self.webpackChunkgenai_llm_documentation_website||[]).push([[4885],{28453(e,t,n){n.d(t,{R:()=>a,x:()=>o});var i=n(96540);const s={},r=i.createContext(s);function a(e){const t=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(r.Provider,{value:t},e.children)}},31257(e,t,n){n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"02-execution-patterns/07-write-tests","title":"Pattern: Write Tests","description":"Use this pattern to leverage AI for generating comprehensive and effective tests. This accelerates the test-writing process, improves code coverage, and ensures functional correctness, especially when paired with AI-generated code or complex logic.","source":"@site/../docs/02-execution-patterns/07-write-tests.md","sourceDirName":"02-execution-patterns","slug":"/02-execution-patterns/07-write-tests","permalink":"/gen-ai-llm-docs/docs/02-execution-patterns/07-write-tests","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"pattern","permalink":"/gen-ai-llm-docs/docs/tags/pattern"},{"inline":true,"label":"testing","permalink":"/gen-ai-llm-docs/docs/tags/testing"},{"inline":true,"label":"quality","permalink":"/gen-ai-llm-docs/docs/tags/quality"},{"inline":true,"label":"verification","permalink":"/gen-ai-llm-docs/docs/tags/verification"}],"version":"current","lastUpdatedAt":null,"frontMatter":{"title":"Pattern: Write Tests","archetype":"pattern","status":"active","owner":"Shailesh (Shaily)","maintainer":"Shailesh (Shaily)","version":"0.1.0","tags":["pattern","testing","quality","verification"],"last_reviewed":"2025-12-28"},"sidebar":"mainSidebar","previous":{"title":"Pattern: The Rubber Duck","permalink":"/gen-ai-llm-docs/docs/02-execution-patterns/07-rubber-duck"},"next":{"title":"Pattern: The Doc-Smith","permalink":"/gen-ai-llm-docs/docs/02-execution-patterns/08-write-docs"}}');var s=n(74848),r=n(28453);const a={title:"Pattern: Write Tests",archetype:"pattern",status:"active",owner:"Shailesh (Shaily)",maintainer:"Shailesh (Shaily)",version:"0.1.0",tags:["pattern","testing","quality","verification"],last_reviewed:"2025-12-28"},o="Pattern: Write Tests",c={},l=[{value:"Overview",id:"overview",level:2},{value:"When to Use",id:"when-to-use",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"The Pattern (Step-by-Step)",id:"the-pattern-step-by-step",level:2},{value:"Step 1: Define Test Scope and Type",id:"step-1-define-test-scope-and-type",level:3},{value:"Step 2: Provide Code and Expected Behavior",id:"step-2-provide-code-and-expected-behavior",level:3},{value:"Step 3: Specify Testing Framework and Style",id:"step-3-specify-testing-framework-and-style",level:3},{value:"Step 4: Review and Refine",id:"step-4-review-and-refine",level:3},{value:"Practical Example: Writing Unit Tests for a <code>ShoppingCart</code> Class",id:"practical-example-writing-unit-tests-for-a-shoppingcart-class",level:3},{value:"Common Pitfalls",id:"common-pitfalls",level:2}];function d(e){const t={admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"pattern-write-tests",children:"Pattern: Write Tests"})}),"\n",(0,s.jsx)(t.admonition,{title:"Value Proposition",type:"info",children:(0,s.jsx)(t.p,{children:"Use this pattern to leverage AI for generating comprehensive and effective tests. This accelerates the test-writing process, improves code coverage, and ensures functional correctness, especially when paired with AI-generated code or complex logic."})}),"\n",(0,s.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(t.p,{children:"Automated tests are the bedrock of reliable software. AI can be a powerful co-pilot in writing various types of tests (unit, integration, end-to-end) by analyzing code, requirements, or even desired behavior. This pattern focuses on guiding the AI to produce high-quality, maintainable tests that act as living documentation and a safety net for future changes."}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Goal"}),": Generate effective and comprehensive test suites based on code or specifications.\n",(0,s.jsx)(t.strong,{children:"Anti-pattern"}),': Asking the AI to "write tests for this" without providing context, desired outcomes, or testing framework preferences, leading to generic and often inadequate tests.']}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"when-to-use",children:"When to Use"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"\u2705 Use This Pattern When..."}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"\ud83d\udeab Do Not Use When..."})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Developing new features (TDD approach)"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"You have no understanding of the code being tested"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Fixing bugs (regression tests)"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"The code is trivial and self-evidently correct"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Increasing coverage for legacy code"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"You are testing AI's creative output (use a human for final validation)"})]})]})]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsx)(t.admonition,{title:"Before you start",type:"warning",children:(0,s.jsx)(t.p,{children:"You must have a clear understanding of the functionality to be tested, the expected inputs and outputs, and the chosen testing framework."})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Artifacts"}),": Code to be tested, functional requirements/Intent Spec. Constraint Spec (testing framework, desired coverage metrics, mocking strategies)."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Context"}),": Knowledge of the system's architecture and any external dependencies."]}),"\n"]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"the-pattern-step-by-step",children:"The Pattern (Step-by-Step)"}),"\n",(0,s.jsx)(t.h3,{id:"step-1-define-test-scope-and-type",children:"Step 1: Define Test Scope and Type"}),"\n",(0,s.jsx)(t.p,{children:"Clearly specify what part of the system needs to be tested (unit, integration, E2E) and the specific behavior or functionality you want to verify."}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Practical Insight"}),": Start small. For a unit test, isolate a single function or class method. For an integration test, focus on a small interaction between components."]}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"step-2-provide-code-and-expected-behavior",children:"Step 2: Provide Code and Expected Behavior"}),"\n",(0,s.jsx)(t.p,{children:"Supply the AI with the code under test and a detailed description of the expected behavior for various inputs, including happy paths, edge cases, and error conditions."}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsxs)(t.p,{children:['"Given the ',(0,s.jsx)(t.code,{children:"calculateTax(amount, taxRate)"})," function, write unit tests."]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"calculateTax(100, 0.1)"})," should return ",(0,s.jsx)(t.code,{children:"10"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"calculateTax(0, 0.05)"})," should return ",(0,s.jsx)(t.code,{children:"0"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"calculateTax(50, 0)"})," should return ",(0,s.jsx)(t.code,{children:"0"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["It should throw an error for negative ",(0,s.jsx)(t.code,{children:"amount"})," or ",(0,s.jsx)(t.code,{children:"taxRate"}),'."']}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"step-3-specify-testing-framework-and-style",children:"Step 3: Specify Testing Framework and Style"}),"\n",(0,s.jsx)(t.p,{children:"Inform the AI about the testing framework (e.g., Jest, Pytest, JUnit) and any preferred testing styles (e.g., BDD, TDD, given-when-then)."}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsxs)(t.p,{children:['"Generate Jest unit tests for the ',(0,s.jsx)(t.code,{children:"TaxCalculator"})," class. Use ",(0,s.jsx)(t.code,{children:"describe"})," and ",(0,s.jsx)(t.code,{children:"it"})," blocks, and ",(0,s.jsx)(t.code,{children:"expect"}),' assertions. Implement mocking for any external dependencies."']}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"step-4-review-and-refine",children:"Step 4: Review and Refine"}),"\n",(0,s.jsx)(t.p,{children:"Critically review the AI-generated tests. Ensure they are readable, cover the specified scenarios, and adhere to best practices. Refine prompts to improve test quality."}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsx)(t.p,{children:'"Review these tests. Are there any missing edge cases for tax calculation, such as extremely large numbers or floating-point precision issues? Suggest additional test cases."'}),"\n"]}),"\n",(0,s.jsx)(t.mermaid,{value:"flowchart LR\n    A[Define Test Scope/Type] --\x3e B[Provide Code/Behavior]\n    B --\x3e C[Specify Framework/Style]\n    C --\x3e D[Review & Refine]\n\n    classDef step fill:#E6F7FF,stroke:#1B75BB,color:#0F1F2E;\n    class A,B,C,D step;"}),"\n",(0,s.jsxs)(t.h3,{id:"practical-example-writing-unit-tests-for-a-shoppingcart-class",children:["Practical Example: Writing Unit Tests for a ",(0,s.jsx)(t.code,{children:"ShoppingCart"})," Class"]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Objective"}),": Write unit tests for a ",(0,s.jsx)(t.code,{children:"ShoppingCart"})," class using Jest."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Task Definition for AI:"})}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Initial Prompt (Code and Requirements):"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-markdown",children:'"I have the following TypeScript class for a shopping cart.\n```typescript\n// shoppingCart.ts\ninterface Product {\n  id: string;\n  name: string;\n  price: number;\n}\n\nclass ShoppingCart {\n  private items: { product: Product; quantity: number }[] = [];\n\n  addItem(product: Product, quantity: number): void {\n    const existingItem = this.items.find(item => item.product.id === product.id);\n    if (existingItem) {\n      existingItem.quantity += quantity;\n    } else {\n      this.items.push({ product, quantity });\n    }\n  }\n\n  removeItem(productId: string): void {\n    this.items = this.items.filter(item => item.product.id !== productId);\n  }\n\n  getTotalItems(): number {\n    return this.items.reduce((total, item) => total + item.quantity, 0);\n  }\n\n  getTotalPrice(): number {\n    return this.items.reduce((total, item) => total + (item.product.price * item.quantity), 0);\n  }\n\n  getCartContents(): { product: Product; quantity: number }[] {\n    return [...this.items]; // Return a copy to prevent external modification\n  }\n}\n'})}),"\n",(0,s.jsxs)(t.p,{children:['"Write Jest unit tests for the ',(0,s.jsx)(t.code,{children:"ShoppingCart"})," class.\nCover the following scenarios:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Adding a single item."}),"\n",(0,s.jsx)(t.li,{children:"Adding multiple units of the same item."}),"\n",(0,s.jsx)(t.li,{children:"Adding different items."}),"\n",(0,s.jsx)(t.li,{children:"Removing an item."}),"\n",(0,s.jsx)(t.li,{children:"Attempting to remove a non-existent item."}),"\n",(0,s.jsx)(t.li,{children:"Calculating total number of items."}),"\n",(0,s.jsx)(t.li,{children:"Calculating total price."}),"\n",(0,s.jsxs)(t.li,{children:["Empty cart behavior for ",(0,s.jsx)(t.code,{children:"getTotalItems"})," and ",(0,s.jsx)(t.code,{children:"getTotalPrice"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["Ensure ",(0,s.jsx)(t.code,{children:"getCartContents"}),' returns a copy.\n"']}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{})}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"AI Generated Tests (Example):"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:"// shoppingCart.test.ts\nimport { ShoppingCart } from './shoppingCart'; // Assuming the class is exported\n\ndescribe('ShoppingCart', () => {\n  let cart: ShoppingCart;\n  const productA = { id: '1', name: 'Laptop', price: 1200 };\n  const productB = { id: '2', name: 'Mouse', price: 25 };\n  const productC = { id: '3', name: 'Keyboard', price: 75 };\n\n  beforeEach(() => {\n    cart = new ShoppingCart();\n  });\n\n  test('should add a single item to the cart', () => {\n    cart.addItem(productA, 1);\n    expect(cart.getTotalItems()).toBe(1);\n    expect(cart.getTotalPrice()).toBe(1200);\n    expect(cart.getCartContents()).toEqual([{ product: productA, quantity: 1 }]);\n  });\n\n  test('should add multiple units of the same item', () => {\n    cart.addItem(productA, 1);\n    cart.addItem(productA, 2);\n    expect(cart.getTotalItems()).toBe(3);\n    expect(cart.getTotalPrice()).toBe(1200 * 3);\n    expect(cart.getCartContents()).toEqual([{ product: productA, quantity: 3 }]);\n  });\n\n  test('should add different items to the cart', () => {\n    cart.addItem(productA, 1);\n    cart.addItem(productB, 1);\n    expect(cart.getTotalItems()).toBe(2);\n    expect(cart.getTotalPrice()).toBe(1200 + 25);\n    expect(cart.getCartContents()).toEqual([\n      { product: productA, quantity: 1 },\n      { product: productB, quantity: 1 },\n    ]);\n  });\n\n  test('should remove an item from the cart', () => {\n    cart.addItem(productA, 2);\n    cart.addItem(productB, 1);\n    cart.removeItem('1'); // Remove productA\n    expect(cart.getTotalItems()).toBe(1);\n    expect(cart.getTotalPrice()).toBe(25);\n    expect(cart.getCartContents()).toEqual([{ product: productB, quantity: 1 }]);\n  });\n\n  test('should do nothing when attempting to remove a non-existent item', () => {\n    cart.addItem(productA, 1);\n    cart.removeItem('999'); // Non-existent ID\n    expect(cart.getTotalItems()).toBe(1);\n    expect(cart.getTotalPrice()).toBe(1200);\n    expect(cart.getCartContents()).toEqual([{ product: productA, quantity: 1 }]);\n  });\n\n  test('should return 0 for total items in an empty cart', () => {\n    expect(cart.getTotalItems()).toBe(0);\n  });\n\n  test('should return 0 for total price in an empty cart', () => {\n    expect(cart.getTotalPrice()).toBe(0);\n  });\n\n  test('should ensure getCartContents returns a copy', () => {\n    cart.addItem(productA, 1);\n    const contents = cart.getCartContents();\n    contents.pop(); // Modify the returned copy\n    expect(cart.getTotalItems()).toBe(1); // Original cart should be unchanged\n  });\n});\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"common-pitfalls",children:"Common Pitfalls"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Pitfall"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Impact"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Correction"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"Testing Implementation Details"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Tests break with minor refactorings, making them brittle."}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Focus on external behavior and public APIs."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"Lack of Edge Case Coverage"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Bugs sneak into production in unusual scenarios."}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Explicitly prompt for edge cases (null inputs, empty collections, boundary values)."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"Over-Mocking/Under-Mocking"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Tests are either too isolated to be useful or too coupled to dependencies."}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Clearly define what should be mocked and what should be integrated."})]})]})]}),"\n",(0,s.jsx)(t.admonition,{title:"Critical Risk",type:"danger",children:(0,s.jsxs)(t.p,{children:["Always manually review AI-generated tests, especially their assertions and setup. AI might miss subtle requirements or generate tests that pass incorrectly due to misinterpretations. Consider AI as a test ",(0,s.jsx)(t.em,{children:"generator"}),", not a test ",(0,s.jsx)(t.em,{children:"verifier"}),"."]})})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);