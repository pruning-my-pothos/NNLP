"use strict";(self.webpackChunkgenai_llm_documentation_website=self.webpackChunkgenai_llm_documentation_website||[]).push([[923],{28453(e,t,n){n.d(t,{R:()=>r,x:()=>o});var s=n(96540);const l={},i=s.createContext(l);function r(e){const t=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),s.createElement(i.Provider,{value:t},e.children)}},52984(e,t,n){n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"01-handbook-core-method/07-tool-use-and-agents","title":"Tool Use and Agents","description":"Move beyond natural language generation to enable LLMs to produce data in predictable formats (e.g., JSON, YAML, XML) and interact with external systems (APIs, databases). This is essential for integrating LLMs into automated workflows and building reliable AI-assisted applications.","source":"@site/../docs/01-handbook-core-method/07-tool-use-and-agents.md","sourceDirName":"01-handbook-core-method","slug":"/01-handbook-core-method/07-tool-use-and-agents","permalink":"/gen-ai-llm-docs/docs/01-handbook-core-method/07-tool-use-and-agents","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"genai-llm","permalink":"/gen-ai-llm-docs/docs/tags/genai-llm"},{"inline":true,"label":"structured-output","permalink":"/gen-ai-llm-docs/docs/tags/structured-output"},{"inline":true,"label":"tools","permalink":"/gen-ai-llm-docs/docs/tags/tools"},{"inline":true,"label":"schema","permalink":"/gen-ai-llm-docs/docs/tags/schema"},{"inline":true,"label":"apis","permalink":"/gen-ai-llm-docs/docs/tags/apis"},{"inline":true,"label":"agents","permalink":"/gen-ai-llm-docs/docs/tags/agents"},{"inline":true,"label":"orchestration","permalink":"/gen-ai-llm-docs/docs/tags/orchestration"}],"version":"current","lastUpdatedAt":null,"frontMatter":{"title":"Tool Use and Agents","archetype":"fundamentals","status":"active","owner":"Shailesh (Shaily)","maintainer":"Shailesh (Shaily)","version":"0.1.0","tags":["genai-llm","structured-output","tools","schema","apis","agents","orchestration"],"last_reviewed":"2025-12-28"},"sidebar":"mainSidebar","previous":{"title":"Retrieval Augmented Generation (RAG)","permalink":"/gen-ai-llm-docs/docs/01-handbook-core-method/05-rag"},"next":{"title":"Testing Tools","permalink":"/gen-ai-llm-docs/docs/01-handbook-core-method/testing-tools"}}');var l=n(74848),i=n(28453);const r={title:"Tool Use and Agents",archetype:"fundamentals",status:"active",owner:"Shailesh (Shaily)",maintainer:"Shailesh (Shaily)",version:"0.1.0",tags:["genai-llm","structured-output","tools","schema","apis","agents","orchestration"],last_reviewed:"2025-12-28"},o="Structured Output, Tool Use, and Agents",a={},d=[{value:"Overview",id:"overview",level:2},{value:"Structured Output",id:"structured-output",level:2},{value:"Techniques for Structured Output",id:"techniques-for-structured-output",level:3},{value:"Example: Generating JSON Output",id:"example-generating-json-output",level:3},{value:"Tool Use (Function Calling)",id:"tool-use-function-calling",level:2},{value:"How Tool Use Works",id:"how-tool-use-works",level:3},{value:"Example: Calling a Weather API",id:"example-calling-a-weather-api",level:3},{value:"Agents and Orchestration",id:"agents-and-orchestration",level:2},{value:"When to Use Agents",id:"when-to-use-agents",level:3},{value:"Guardrails for Agents",id:"guardrails-for-agents",level:3},{value:"Common Pitfalls",id:"common-pitfalls",level:2},{value:"Last Reviewed / Last Updated",id:"last-reviewed--last-updated",level:2}];function c(e){const t={admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.header,{children:(0,l.jsx)(t.h1,{id:"structured-output-tool-use-and-agents",children:"Structured Output, Tool Use, and Agents"})}),"\n",(0,l.jsx)(t.admonition,{title:"Value Proposition",type:"info",children:(0,l.jsx)(t.p,{children:"Move beyond natural language generation to enable LLMs to produce data in predictable formats (e.g., JSON, YAML, XML) and interact with external systems (APIs, databases). This is essential for integrating LLMs into automated workflows and building reliable AI-assisted applications."})}),"\n",(0,l.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsx)(t.p,{children:"While LLMs excel at generating free-form text, many tasks require structured outputs that can be parsed and acted upon by other software components. Furthermore, to perform complex, multi-step tasks, LLMs need the ability to use external tools. This document explores techniques for guiding LLMs to produce structured data and how to enable them to invoke and interpret external tool calls, transforming them from text generators into agents capable of interacting with the world."}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"Goal"}),": Enable LLMs to produce machine-readable output and execute actions through external tools.\n",(0,l.jsx)(t.strong,{children:"Anti-pattern"}),": Expecting an LLM to reliably generate complex code or interact with APIs solely through free-form conversational prompts, leading to unreliable parsing and execution failures."]}),"\n",(0,l.jsx)(t.hr,{}),"\n",(0,l.jsx)(t.h2,{id:"structured-output",children:"Structured Output"}),"\n",(0,l.jsx)(t.h3,{id:"techniques-for-structured-output",children:"Techniques for Structured Output"}),"\n",(0,l.jsxs)(t.ol,{children:["\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"Direct Instruction"}),": Explicitly ask the LLM for a specific format."]}),"\n",(0,l.jsxs)(t.blockquote,{children:["\n",(0,l.jsx)(t.p,{children:'"Generate the response as a JSON object."'}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"Schema Definition"}),": Provide the LLM with a formal schema (e.g., JSON Schema, TypeScript interfaces)."]}),"\n",(0,l.jsxs)(t.blockquote,{children:["\n",(0,l.jsxs)(t.p,{children:['"Generate a TypeScript interface for a ',(0,l.jsx)(t.code,{children:"User"})," object that conforms to the following JSON Schema: ",(0,l.jsx)(t.code,{children:"{ ... }"}),'"']}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"Few-shot Examples"}),": Give the LLM examples of the desired structured output."]}),"\n",(0,l.jsxs)(t.blockquote,{children:["\n",(0,l.jsxs)(t.p,{children:['"Here is an example of a valid API response: ',(0,l.jsx)(t.code,{children:"{'status': 'success', 'data': {...}}"}),'. Generate a similar response for X."']}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"Grammar/Format Constraints"}),": Use specific libraries (e.g., ",(0,l.jsx)(t.code,{children:"lm-format-enforcer"})," in Python) or prompt techniques that force the LLM to adhere to a grammar."]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(t.h3,{id:"example-generating-json-output",children:"Example: Generating JSON Output"}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"Prompt"}),":"]}),"\n",(0,l.jsxs)(t.blockquote,{children:["\n",(0,l.jsxs)(t.p,{children:['"Generate a JSON object for a product. It should have ',(0,l.jsx)(t.code,{children:"name"})," (string), ",(0,l.jsx)(t.code,{children:"price"})," (number), ",(0,l.jsx)(t.code,{children:"inStock"})," (boolean), and ",(0,l.jsx)(t.code,{children:"tags"}),' (array of strings)."']}),"\n"]}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"LLM Output"}),":"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-json",children:'{\n  "name": "Wireless Ergonomic Mouse",\n  "price": 49.99,\n  "inStock": true,\n  "tags": ["peripherals", "ergonomic", "wireless"]\n}\n'})}),"\n",(0,l.jsx)(t.hr,{}),"\n",(0,l.jsx)(t.h2,{id:"tool-use-function-calling",children:"Tool Use (Function Calling)"}),"\n",(0,l.jsxs)(t.p,{children:["Tool use (also known as function calling) enables LLMs to interact with external systems by calling predefined functions. The LLM's role shifts from merely generating text to generating ",(0,l.jsx)(t.em,{children:"arguments for functions"})," that then perform real-world actions."]}),"\n",(0,l.jsx)(t.h3,{id:"how-tool-use-works",children:"How Tool Use Works"}),"\n",(0,l.jsxs)(t.ol,{children:["\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.strong,{children:"Define Tools"}),": You provide the LLM with a description of available functions, including their names, parameters, and what they do (often using schemas)."]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.strong,{children:"User Request"}),": The user makes a request that might require an external action."]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.strong,{children:"LLM Determines Tool"}),": The LLM analyzes the request and decides if a tool is needed. If so, it generates the arguments to call that tool."]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.strong,{children:"Execute Tool"}),": Your application code executes the tool with the LLM-generated arguments."]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.strong,{children:"LLM Gets Tool Output"}),": The output of the tool is fed back to the LLM."]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.strong,{children:"LLM Responds"}),": The LLM generates a final, informed response to the user."]}),"\n"]}),"\n",(0,l.jsx)(t.h3,{id:"example-calling-a-weather-api",children:"Example: Calling a Weather API"}),"\n",(0,l.jsx)(t.p,{children:(0,l.jsx)(t.strong,{children:"Tool Definition (provided to LLM):"})}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-json",children:'{\n  "name": "getCurrentWeather",\n  "description": "Get the current weather for a location",\n  "parameters": {\n    "type": "object",\n    "properties": {\n      "location": {\n        "type": "string",\n        "description": "The city and state, e.g. San Francisco, CA"\n      },\n      "unit": {"type": "string", "enum": ["celsius", "fahrenheit"]}\n    },\n    "required": ["location"]\n  }\n}\n'})}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"User Request"}),': "What\'s the weather like in Boston?"']}),"\n",(0,l.jsx)(t.p,{children:(0,l.jsx)(t.strong,{children:"LLM Tool Call (generated by LLM):"})}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-json",children:'{\n  "tool_name": "getCurrentWeather",\n  "parameters": {\n    "location": "Boston, MA"\n  }\n}\n'})}),"\n",(0,l.jsx)(t.hr,{}),"\n",(0,l.jsx)(t.h2,{id:"agents-and-orchestration",children:"Agents and Orchestration"}),"\n",(0,l.jsx)(t.p,{children:"An AI agent is a system that uses an LLM to reason, plan, and execute a sequence of actions to achieve a goal. Agents are goal-directed loops that perceive their environment, plan steps, act using tools, and observe the results."}),"\n",(0,l.jsx)(t.h3,{id:"when-to-use-agents",children:"When to Use Agents"}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:"Multi-step tasks needing planning and tool use."}),"\n",(0,l.jsx)(t.li,{children:"Environments where intermediate verification is possible."}),"\n"]}),"\n",(0,l.jsx)(t.h3,{id:"guardrails-for-agents",children:"Guardrails for Agents"}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.strong,{children:"Tool allowlist"})," with schemas and side-effect constraints."]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.strong,{children:"Planning limits"}),": max steps, stop conditions, escalation paths."]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.strong,{children:"Observation/verification"})," after each critical action."]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.strong,{children:"Audit"}),": log plans, tool calls, and state transitions."]}),"\n"]}),"\n",(0,l.jsx)(t.mermaid,{value:"flowchart LR\n    Request[User Request] --\x3e Agent{Agent}\n    Agent --\x3e Plan[Plan Steps]\n    Plan --\x3e ToolCall[Tool Call]\n    ToolCall --\x3e External[External System]\n    External --\x3e Observation[Observation]\n    Observation --\x3e Agent\n    Agent --\x3e Response[Final Response]\n\n    classDef step fill:#E6F7FF,stroke:#1B75BB,color:#0F1F2E;\n    class Request,Agent,Plan,ToolCall,External,Observation,Response step;"}),"\n",(0,l.jsx)(t.hr,{}),"\n",(0,l.jsx)(t.h2,{id:"common-pitfalls",children:"Common Pitfalls"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Pitfall"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Impact"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Correction"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.strong,{children:"Vague Schema Definitions"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"LLM generates invalid or incomplete structured data."}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Provide clear, explicit JSON Schemas or type definitions."})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.strong,{children:"Underspecified Tool Descriptions"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"LLM calls tools with incorrect arguments or in wrong situations."}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Make tool descriptions precise, including parameter types and examples."})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.strong,{children:"Ignoring Tool Output"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"LLM doesn't use tool results to inform its response, leading to errors."}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Ensure tool output is correctly fed back to the LLM and prompt it to use that context."})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.strong,{children:"Unbounded Agent Loops"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Agent gets stuck in a loop, wasting resources."}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Implement stop conditions, max steps, and human-in-the-loop checkpoints."})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.strong,{children:"Giving Agents Destructive Tools"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Agent causes unintended side effects."}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Use read-only tools where possible and require human confirmation for write actions."})]})]})]}),"\n",(0,l.jsx)(t.hr,{}),"\n",(0,l.jsx)(t.h2,{id:"last-reviewed--last-updated",children:"Last Reviewed / Last Updated"}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:"Last reviewed: 2025-12-28"}),"\n",(0,l.jsx)(t.li,{children:"Version: 0.1.0"}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,l.jsx)(t,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}}}]);